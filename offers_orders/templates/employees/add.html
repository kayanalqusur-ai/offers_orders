{% extends "base.html" %}

{% block title %}{% if employee %}تعديل الموظف{% else %}إضافة موظف{% endif %}{% endblock %}

{% block content %}
<h2>
    <i class="fas fa-edit"></i> 
    {% if employee %}
        تعديل الموظف: {{ employee.name }}
    {% else %}
        إضافة موظف جديد
    {% endif %}
</h2>

<form method="POST">
    <div class="mb-3">
        <label>الاسم</label>
        <input type="text" name="name" class="form-control" value="{{ employee.name if employee else '' }}" required>
    </div>
    <div class="mb-3">
        <label>الوظيفة</label>
        <input type="text" name="role" class="form-control" value="{{ employee.role if employee else '' }}" required>
    </div>
    <div class="mb-3">
        <label>اسم المستخدم</label>
        <input type="text" name="username" class="form-control" value="{{ employee.username if employee else '' }}" required>
    </div>
    <div class="mb-3">
        <label>كلمة المرور</label>
        <input type="password" name="password" class="form-control" {% if not employee %}required{% endif %}>
    </div>

    <div class="mb-3">
        <label>الصلاحيات</label>
        {% for perm in available_permissions %}
            <div class="form-check">
                <input class="form-check-input" type="checkbox" name="permissions[]" value="{{ perm }}" 
                       {% if employee and perm in employee.permissions %}checked{% endif %}>
                <label class="form-check-label">{{ perm }}</label>
            </div>
        {% endfor %}
    </div>

    <button type="submit" class="btn btn-primary">{% if employee %}تعديل{% else %}إضافة{% endif %}</button>
</form>
{% endblock %}
