{% extends "base.html" %}

{% block title %}تفاصيل عرض إيجار - {{ district }}{% endblock %}

{% block content %}
<div class="container mt-4">
    <h2><i class="fas fa-key"></i> تفاصيل عرض الإيجار - {{ district }}</h2>
    <hr>

    <!-- معرض الصور -->
    {% if images %}
    <div id="offerCarousel" class="carousel slide mb-4" data-bs-ride="carousel">
        <div class="carousel-inner">
            {% for img in images %}
            <div class="carousel-item {% if loop.first %}active{% endif %}">
                <img src="{{ url_for('uploaded_file', filename=img) }}" class="d-block w-100" style="max-height:400px; object-fit:cover;">
            </div>
            {% endfor %}
        </div>
        <button class="carousel-control-prev" type="button" data-bs-target="#offerCarousel" data-bs-slide="prev">
            <span class="carousel-control-prev-icon"></span>
        </button>
        <button class="carousel-control-next" type="button" data-bs-target="#offerCarousel" data-bs-slide="next">
            <span class="carousel-control-next-icon"></span>
        </button>
    </div>
    {% else %}
        <p class="text-muted">لا توجد صور لهذا العرض</p>
    {% endif %}

    <!-- تفاصيل العرض -->
    <div class="card">
        <div class="card-body">
            <h5 class="card-title">{{ offer.unit_type }}</h5>
            <p><strong>الطابق:</strong> {{ offer.floor or '-' }}</p>
            <p><strong>المساحة:</strong> {{ offer.area or '-' }} م²</p>
            <p><strong>السعر:</strong> {{ offer.price or '-' }} ريال</p>
            <p><strong>التفاصيل:</strong> {{ offer.detalis or '-' }}</p>
            <p><strong>المسوق:</strong> {{ offer.marketer or '-' }}</p>
            <p><strong>صفة المالك:</strong> {{ offer.owner_type or '-' }}</p>
            <p><strong>الحالة:</strong> 
                {% if offer.status == 'متاح' %}
                    <span class="badge bg-success">{{ offer.status }}</span>
                {% elif offer.status == 'عربون' %}
                    <span class="badge bg-warning text-dark">{{ offer.status }}</span>
                {% else %}
                    <span class="badge bg-secondary">{{ offer.status }}</span>
                {% endif %}
            </p>
            <p><strong>تاريخ الإنشاء:</strong> {{ offer.created_at.strftime('%Y-%m-%d') }}</p>
            {% if offer.notes %}
            <p><strong>ملاحظات:</strong> {{ offer.notes }}</p>
            {% endif %}
        </div>
    </div>

    <a href="{{ url_for('rental' + ('m' if district=='وسط' else 'w') + '_offers') }}" class="btn btn-secondary mt-3">⬅ العودة لقائمة العروض</a>
</div>
{% endblock %}
